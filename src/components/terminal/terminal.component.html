<div class="flex flex-col h-screen w-full text-sm lg:text-base">
  <header class="flex-shrink-0 flex justify-between items-center bg-black/50 p-2 border-b-2 border-green-800">
    <div class="text-green-400 font-bold">
      <p>Puneet Goyal</p>
      <p class="text-xs text-green-500">Full Stack Developer</p>
    </div>
    <div class="hidden md:flex flex-wrap items-center justify-end gap-x-1 lg:gap-x-3 text-green-400">
      @for(cmd of headerCommands; track cmd) {
        <span (click)="runCommandFromHeader(cmd)" class="cursor-pointer hover:bg-green-900/50 px-2 py-1 rounded transition-colors duration-200">{{ cmd }}</span>
      }
    </div>
  </header>

  <main class="flex-grow flex bg-black/80 backdrop-blur-sm overflow-hidden">
    <div #cardContainer 
         class="hidden md:flex w-1/3 lg:w-1/4 p-4 border-r-2 border-green-800 justify-center relative overflow-hidden"
         style="perspective: 1000px; background: radial-gradient(circle, rgba(20,20,20,1) 0%, rgba(10,10,10,1) 70%);">
        
        <svg #lanyardSvg class="absolute top-0 left-0 w-full h-full pointer-events-none z-10">
            <path #lanyardAnchorClip d="M -10 0 a10,10 0 0,1 20,0 z" fill="#4b5563" />
            <path id="lanyardPathId" #lanyardPath d="" fill="none"></path>
            <use href="#lanyardPathId" stroke-width="12" stroke="#3f3f46" stroke-linecap="round"/>
            <text dy="4" fill="#a1a1aa" font-size="10" font-family="Source Code Pro, monospace" letter-spacing="1">
                <textPath href="#lanyardPathId" startOffset="50%" text-anchor="middle">goyalpuneet18</textPath>
            </text>
            <path #lanyardClip d="M -8 0 a8,8 0 0,1 16,0 z" fill="#71717a" stroke="#27272a" stroke-width="2.5" />
        </svg>

        <div #cardWrapper 
             class="absolute cursor-grab z-20"
             style="top: 150px; left: calc(50% - 7rem); transform-style: preserve-3d;">
            
            <div #interactiveCard 
                 class="w-56 h-[22rem] rounded-2xl shadow-2xl p-3 flex flex-col bg-zinc-900/50 border border-white/10 backdrop-blur-md"
                 style="transform-style: preserve-3d;">
                
                <div class="absolute top-0 left-1/2 -translate-x-1/2 w-10 h-3.5 bg-zinc-900/80 rounded-b-md border-x border-b border-white/10 z-20"></div>
                <div class="absolute inset-0 bg-repeat bg-center opacity-50 pointer-events-none" style="background-image: linear-gradient(to right, rgba(255, 255, 255, 0.04) 1px, transparent 1px); background-size: 8px;"></div>
                <div class="absolute top-0 left-0 w-full h-full rounded-2xl overflow-hidden pointer-events-none">
                    <div class="absolute -top-1/4 -left-1/4 w-3/4 h-[150%] bg-white/5 skew-x-[-25deg]"></div>
                </div>

                <div class="relative z-10 flex flex-col h-full pt-4">
                    <div class="flex justify-between items-start">
                         <div class="w-8 h-8 text-gray-400 border border-gray-500 rounded-sm flex items-center justify-center font-bold text-lg p-1">
                           <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                              <path stroke-linecap="round" stroke-linejoin="round" d="M17.25 6.75 22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3-4.5 16.5" />
                            </svg>
                         </div>
                        <span class="font-mono text-xs text-gray-400 pt-1">goyalpuneet18</span>
                    </div>
                    
                    <div class="flex-grow flex items-end mt-2">
                        <img src="https://picsum.photos/seed/water-droplets/200/200" 
                             alt="Puneet Goyal" 
                             class="w-full h-auto object-cover rounded-lg grayscale">
                    </div>
                </div>
            </div>
        </div>
        <p class="absolute bottom-4 text-center text-xs text-gray-500 pointer-events-none">[Interactive 3D Card]</p>
    </div>

    <div #terminalScreen class="flex-1 p-4 overflow-y-auto" (click)="focusInput()">
      @for(line of history(); track $index) {
        <div [innerHTML]="line | safeHtml" class="command-output"></div>
      }
      @if (!isProcessing()) {
        <div class="flex items-center">
          <span class="text-green-400 font-bold">{{ prompt }}</span>
          <span class="ml-1 break-words">{{ command() }}</span>
          <span class="cursor"></span>
        </div>
      }
      <input #inputField
             type="text"
             [(ngModel)]="command"
             (keydown.enter)="onCommandSubmit()"
             (blur)="focusInput()"
             [disabled]="isProcessing()"
             class="absolute opacity-0 w-0 h-0 p-0 border-0"
             autofocus
             autocomplete="off"
             autocorrect="off"
             autocapitalize="off"
             spellcheck="false">
    </div>
  </main>

  <footer class="flex-shrink-0 flex justify-between items-center bg-black/80 p-1.5 text-xs">
    <div class="text-green-400">{{ prompt.slice(0, -2) }}</div>
    <div class="text-gray-400">{{ currentTime() | date:'M/d/yyyy, h:mm:ss a' }}</div>
  </footer>
</div>